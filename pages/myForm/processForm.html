<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8" />  
  <title>Embedded Page</title>  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.0.0/dist/index.css">  
</head>  
<body>  
  <div id="app" style="margin-top: 8vh;">  
    <div id="form-create"></div>  
  </div>
</body>
  <!-- import Vue -->
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <!-- import element-ui -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.0.0/dist/index.css">
  <script src="https://cdn.jsdelivr.net/npm/element-plus@2.0.0/dist/index.full.min.js"></script>
  <!-- import formCreate -->
  <script src="https://cdn.jsdelivr.net/npm/@form-create/element-ui@^3/dist/form-create.min.js"></script>
<!-- 挂载组件 -->
  <script>
	  
    const app = Vue.createApp({});
    app.use(ElementPlus);  
	app.use(formCreate);
	app.mount('#app');
    const root = document.getElementById('form-create');
	
	// 拿到传过来的表单结构
	const urlParams = new URLSearchParams(window.location.search);
	const myRule = JSON.parse(urlParams.get('rule'));
	const myOption = JSON.parse(urlParams.get('option'));
	myOption.el = root
	myOption.onSubmit = function (formData) {
			    //按钮进入提交状态
			    // fApi.btn.loading()
				sendDataToParent(formData)
			}
    const fApi = window.formCreate.create(myRule,myOption)
	// 向主页面传用户输入值
	function sendDataToParent(data) {
		const dataToSend = { msg: data };
		window.parent.postMessage(dataToSend, '*');
	}
  </script>  
	
</html>